import streamlit as st
import pandas as pd
import random
import toml
import pathlib
import google.generativeai as genai

# ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª© êµ¬ì¡°í™”
checklist = {
    "ì‚¶ê³¼ ë§¥ë½ & ìˆ˜ì—… ë° í•™ìŠµì ë¶„ì„": [
        "í•™ìƒì˜ ì‚¶ê³¼ ì—°ê³„í•œ í•™ìŠµë‚´ìš©ì„ í‰ê°€í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆëŠ”ê°€?",
        "í•™ìŠµ ê³¼ì • ì¤‘ í•µì‹¬ ì—­ëŸ‰ì„ í‰ê°€í•˜ê³  ìˆëŠ”ê°€?",
        "í‰ê°€ê°€ ì‹¤ìƒí™œì˜ ë§¥ë½ê³¼ ì—°ê³„ë˜ê±°ë‚˜ ì ìš©ë  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆëŠ”ê°€?",
        "í•™ìƒì˜ ì‚¬ì „ ì§€ì‹ ë¶„ì„ì„ ìœ„í•œ í‰ê°€ê°€ ì„¤ê³„ë˜ì—ˆëŠ”ê°€?"
    ],
    "ë§ì¶¤í˜• & ì„±ì°° ê¸°íšŒ ì œê³µ": [
        "ê°œì¸ë³„ í•™ìŠµ ìˆ˜ì¤€ì— ë§ëŠ” ë§ì¶¤í˜• í‰ê°€ ë¬¸í•­ì„ ì„¤ê³„í•˜ì˜€ëŠ”ê°€?",
        "ê°œì¸ í•™ìŠµ ê³¼ì •ë³„ ë§ì¶¤í˜• í‰ê°€ ë¬¸í•­ì„ ì„¤ê³„í•˜ì˜€ëŠ”ê°€?",
        "ìœµí•©ì  ì‚¬ê³ ì™€ ì°½ì˜ì  ë¬¸ì œí•´ê²°ë ¥ì´ ìš”êµ¬ë˜ëŠ” í‰ê°€ì¸ê°€?",
        "í•™ìƒ ê°œë³„ í‰ê°€ë¥¼ í†µí•œ ë§ì¶¤í˜• í”¼ë“œë°±ì´ ì œê³µë˜ëŠ”ê°€?"
    ],
    "ì§€ì‹ êµ¬ì„± & ìƒí˜¸ì‘ìš© í˜‘ë ¥": [
        "í•™ìƒì˜ ìƒí˜¸ì‘ìš©ì´ ì´ë£¨ì–´ì§€ëŠ” í‰ê°€ ë¬¸í•­ì„ ì„¤ê³„í•˜ì˜€ëŠ”ê°€?",
        "í‰ê°€ë¥¼ í†µí•´ í˜‘ë ¥ì„ ìœ„í•œ ê°œë³„ í•™ë ¥ í–¥ìƒë„ê°€ ë‚˜íƒ€ë‚˜ëŠ”ê°€?",
        "í•™ìƒì´ ëŠ¥ë™ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë©° í˜‘ë ¥ì´ ì´ë£¨ì–´ì§€ëŠ” í‰ê°€ì¸ê°€?",
        "í•™ìƒ í˜‘ë ¥ í™œë™ì„ ë•ëŠ” ë§ì¶¤í˜• í”¼ë“œë°±ì´ ì œê³µë˜ëŠ”ê°€?"
    ]
}

# ìˆ˜ì—…ì•ˆ ìƒ˜í”Œ
sample_lessons = [
    """1) AI ë””ì§€í„¸êµê³¼ì„œ ê¸°ë°˜ ì„ ìˆ˜í•™ìŠµ
ì§„ë‹¨í‰ê°€ í•™ìƒì˜ ë‹¨ì› ì¶œë°œì  ì§„ë‹¨
2) ë¶„ìˆ˜ ê³„ì‚°ì„ ìœ„í•´ ì›ë¦¬ ê¸°ë°˜ ë°©ë²•ì˜ ì´í•´ AI ë””ì§€í„¸êµê³¼ì„œ í˜•ì„±í‰ê°€
3) í˜•ì„±í‰ê°€ ê²°ê³¼ ë¶„ì„ìœ¼ë¡œ ì„±ì·¨ìˆ˜ì¤€ ë„ë‹¬ì  í™•ì¸ AI ë””ì§€í„¸êµê³¼ì„œ ì œê³µ ê°œì¸ë³„ ë§ì¶¤í˜• ì½˜í…ì¸  í•´ê²° ìƒí™©ì—ì„œ ë””ë”¤ì´ í•„ìš”í•œ í•™ìŠµìì— ëŒ€í•œ êµì‚¬ì˜ ì¼ëŒ€ì¼ í”¼ë“œë°±
4) AI ë””ì§€í„¸êµê³¼ì„œ ê¸°ë°˜ ì„±ì·¨ë„í‰ê°€ ì¼ì • ì„±ì·¨ìˆ˜ì¤€ ë„ë‹¬ ì—¬ë¶€ í™•ì¸
5) ë„ë‹¬ ì—¬ë¶€ì— ë”°ë¥¸ ë§ì¶¤í˜• ìˆ˜í–‰ í™œë™ ì œê³µ ë””ë”¤ ì½˜í…ì¸ (ëŠë¦° í•™ìŠµì) ë° ë„ì•½ í”„ë¡œì íŠ¸ í™œë™ ì œê³µ ë° êµì‚¬ í‰ê°€/í”¼ë“œë°±
6) ë‹¨ì›í‰ê°€ í†µí•œ ë°°ì›€ ë‚´ìš© í™•ì¸""",
    
    """1) ìš°ë¦¬ ëª¸ì˜ ë‹¤ì–‘í•œ ê¸°ê´€ì— ëŒ€í•œ ì£¼ìš” ìš©ì–´ í™•ì¸ AI ì±—ë´‡ í™œìš©
2) ìš©ì–´ ì´í•´í•˜ê¸° AI ë””ì§€í„¸êµê³¼ì„œ ê¸°ë°˜ ì¸ì²´ ê¸°ê´€ ë‚´ ì£¼ìš” ë¶€ë¶„ì— ëŒ€í•œ ì¡°ì‚¬ í›„ êµì‚¬ í”¼ë“œë°±
3) ê°œë… ê³µìœ í•˜ê¸° ì¡°ì‚¬ ë‚´ìš© ë™ë£Œ í•™ìƒê³¼ ê³µìœ í•˜ê³  í”¼ë“œë°± ì£¼ê³ ë°›ê¸°
4) ì£¼ì œ ì •í•˜ê¸° AI ë””ì§€í„¸êµê³¼ì„œ ë°ì´í„° ê¸°ë°˜ ëª¨ë‘  êµ¬ì„±í•œ í›„ ì¸ì²´ ê¸°ê´€ ê°„ ì—°ê´€ì„±ì´ ë“œëŸ¬ë‚˜ëŠ” ë°œí‘œ ìë£Œ ì¡°ì§í•˜ê³  êµì‚¬ ë° ë™ë£Œ í”¼ë“œë°± ë°›ê¸°
5) ë°œí‘œ ë‚´ìš© êµ¬ì„±í•˜ê¸° ë™ì˜ìƒìœ¼ë¡œ êµ¬ì„±í•  ë°œí‘œ ë‚´ìš© ëª¨ë‘ ë³„ êµ¬ì„±í•˜ê³  ë™ë£Œ í”¼ë“œë°± ì£¼ê³ ë°›ê¸°
6) ë°œí‘œí•˜ê¸° ì¸ì²´ ë‚´ ë‘ì„¸ ê¸°ê´€ ê°„ ì—°ê´€ì„±ì´ ë“œëŸ¬ë‚˜ëŠ” ì¸ì²´ ê¸°ê´€ ë°œí‘œí•˜ê¸° ìµœì¢… í‰ê°€""",

    """1) í•œêµ­ ë¬¸í™” ê´€ë ¨ ì£¼ì œ ì„ ì • ë¸Œë ˆì¸ìŠ¤í† ë°í•˜ê¸° ë””ë”¤ ì½˜í…ì¸ (ëŠë¦° í•™ìŠµì) ë° ë„ì•½ í”„ë¡œì íŠ¸ í™œë™ ì œê³µ ë° êµì‚¬ í‰ê°€/í”¼ë“œë°±
2) ì„¸ë¶€ ì£¼ì œ ê´€ë ¨ ìë£Œ ì¡°ì‚¬í•˜ê¸° AI ì±—ë´‡ í™œìš©í•˜ê¸°
3) ì˜ì–´ ëŒ€ë³¸ ì‘ì„± í›„ í”¼ë“œë°± ë°›ê¸° AI ë””ì§€í„¸êµê³¼ì„œë¡œë¶€í„° ì“°ê¸° í”¼ë“œë°± ë°›ê¸°(ì˜ì‘)
4) ì˜ì–´ ë§í•˜ê¸° ë°œí‘œ ê°œë³„ ì—°ìŠµí•˜ê¸° AI ë””ì§€í„¸êµê³¼ì„œë¡œë¶€í„° ë§í•˜ê¸° í”¼ë“œë°± ë°›ê¸°(ë…¹ìŒ ë° ë°œìŒ êµì •, ê°œë³„ ë§ì¶¤ í•™ìŠµ ë° ë³´ì¶©ì‹¬í™” ê³¼ì œ ì œì‹œ) ëŠë¦° í•™ìŠµìì— ëŒ€í•œ êµì‚¬ í”¼ë“œë°±
5) ì˜ì–´ ë§í•˜ê¸° ë°œí‘œ ëª¨ë‘  ì—°ìŠµí•˜ê¸° ëª¨ë‘ ì› í”¼ë“œë°±
6) ì˜ì–´ ë§í•˜ê¸° ë°œí‘œí•˜ê¸° êµì‚¬ í‰ê°€ ë° í”¼ë“œë°±""",

    """1) ì£¼ì œ ì •í•˜ê¸° ëª¨ë‘ ì› í˜‘ë ¥ - AI ì±—ë´‡ í™œìš©í•˜ê¸°
2) ëŒ€ë³¸ ì‘ì„±í•˜ê¸° êµì‚¬ê°€ ì œì‘í•œ ì±—ë´‡ í™œìš© í˜¹ì€ AI ë””ì§€í„¸êµê³¼ì„œë¡œë¶€í„° ì“°ê¸° í”¼ë“œë°± ë°›ê¸°
3) ëŒ€ë³¸ ì‘ì„± í›„ í”¼ë“œë°± ë°›ê¸° ì™„ì„±ë„ê°€ ë†’ì•„ ì±—ë´‡ì´ í†µê³¼ì‹œí‚¨ í•™ìƒì€ êµì‚¬ì˜ í”¼ë“œë°± ì œê³µ
4) ì§ì§€ì–´ ë°œí‘œ ì—°ìŠµí•˜ê¸° ì§ì—ê²Œ í‰ê°€ ë°›ê¸°(í‰ê°€ ê¸°ì¤€ì„ ê·¼ê±°ë¡œ ê°ì  ìš”ì¸ì— ëŒ€í•œ ë™ë£Œ í”¼ë“œë°±)
5) ë°œí‘œí•˜ê¸° êµì‚¬ì˜ ì±„ì  ë° ê°ì  ìš”ì¸ì— ëŒ€í•œ í”¼ë“œë°± ì œê³µ
6) ë°œí‘œí•˜ê¸° ì¬ë„ì „ ìµœì¢… í‰ê°€""",

    """1) ê³ ëŒ€ ë¬¸ëª…ì˜ ì£¼ìš” íŠ¹ì§• ì¡°ì‚¬: ì¸í„°ë„·ì„ í†µí•œ ìë£Œ ê²€ìƒ‰ ë° í•™ìˆ  ë…¼ë¬¸ ì°¸ì¡°
2) ê° ë¬¸ëª… ê°„ì˜ ì°¨ì´ì ê³¼ ìœ ì‚¬ì  ë¹„êµ ë¶„ì„: í˜‘ì—… ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë‘ ë³„ ë¹„êµ ë¶„ì„
3) íŒ€ë³„ë¡œ ë¬¸ëª…ì— ëŒ€í•œ ë°œí‘œ ìë£Œ ì¤€ë¹„: í”„ë ˆì  í…Œì´ì…˜ ì†Œí”„íŠ¸ì›¨ì–´ í™œìš©
4) ë°œí‘œ í›„ êµì‚¬ì™€ í•™ìƒë“¤ë¡œë¶€í„° í”¼ë“œë°± ë°›ê¸°: ì‹¤ì‹œê°„ í”¼ë“œë°± ë„êµ¬ ì‚¬ìš©
5) ê° íŒ€ì˜ ë°œí‘œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì¢…í•© í† ë¡ : í† ë¡ ì„ ìœ„í•œ ì˜¨ë¼ì¸ ê²Œì‹œíŒ í™œìš©
6) ìµœì¢… ë³´ê³ ì„œ ì‘ì„± ë° ì œì¶œ: í´ë¼ìš°ë“œ ê¸°ë°˜ ë¬¸ì„œ ë„êµ¬ë¥¼ í†µí•´ ê°œë³„ ë³´ê³ ì„œ ì‘ì„± ë° ì œì¶œ, êµì‚¬ëŠ” ê°œë³„ í”¼ë“œë°± ì œê³µ""",

    """1) ì†Œì„¤ ì† ì¸ë¬¼ ë¶„ì„ ë° ì„±ê²© ì´í•´: ë””ì§€í„¸ ë…ì„œ í”Œë«í¼ í™œìš©í•˜ì—¬ ì†Œì„¤ ì½ê¸°
2) ì¸ë¬¼ ê°„ì˜ ê´€ê³„ë„ ì‘ì„±: ë””ì§€í„¸ ë§ˆì¸ë“œë§µ ë„êµ¬ ì‚¬ìš©
3) ì¸ë¬¼ì˜ í–‰ë™ ë™ê¸°ì™€ ë³€í™” ë¶„ì„: í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œì„ í†µí•´ í† ë¡  ê²Œì‹œíŒì—ì„œ í† ë¡ 
4) ì¸ë¬¼ ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ ì°½ì‘ ê¸€ì“°ê¸°: ì›Œë“œ í”„ë¡œì„¸ì„œ ì‚¬ìš©
5) ì‘ì„±í•œ ê¸€ì— ëŒ€í•œ ë™ë£Œ í”¼ë“œë°±: í˜‘ì—… ë¬¸ì„œ ë„êµ¬ì˜ ëŒ“ê¸€ ê¸°ëŠ¥ì„ í™œìš©í•œ ë™ë£Œ í”¼ë“œë°±
6) ìµœì¢… ì‘í’ˆ ë°œí‘œ ë° êµì‚¬ í‰ê°€: ë¹„ë””ì˜¤ ë°œí‘œ ë„êµ¬ë¥¼ í†µí•´ ë°œí‘œ, êµì‚¬ëŠ” ë£¨ë¸Œë¦­ì„ ì‚¬ìš©í•´ í‰ê°€ ë° í”¼ë“œë°± ì œê³µ""",

    """1) í˜„ëŒ€ ë¯¸ìˆ  ì‘í’ˆ ê°ìƒ ë° ë¹„í‰: ë””ì§€í„¸ ê°¤ëŸ¬ë¦¬ ë° ì˜¨ë¼ì¸ ë¯¸ìˆ ê´€ í™œìš©
2) ê°ìƒí•œ ì‘í’ˆì˜ íŠ¹ì§•ê³¼ ê¸°ë²• ë¶„ì„: ì˜¨ë¼ì¸ í¬íŠ¸í´ë¦¬ì˜¤ ë„êµ¬ ì‚¬ìš©í•˜ì—¬ ë¶„ì„ ê²°ê³¼ ê³µìœ 
3) ì‘í’ˆì— ëŒ€í•œ ê°œì¸ì˜ ëŠë‚Œê³¼ í•´ì„ ê³µìœ : í˜‘ì—… ë„êµ¬ í™œìš©
4) ë¯¸ìˆ ì‚¬ì  ë°°ê²½ê³¼ ì‘í’ˆì˜ ìƒê´€ê´€ê³„ ì¡°ì‚¬: ì˜¨ë¼ì¸ ë°±ê³¼ì‚¬ì „ ë° í•™ìˆ  ìë£Œ í™œìš©
5) íŒ€ë³„ë¡œ ì‘í’ˆì— ëŒ€í•œ ë¹„í‰ì„œ ì‘ì„±: í˜‘ì—… ë¬¸ì„œ ë„êµ¬ì—ì„œ í˜‘ì—…í•˜ì—¬ ë¹„í‰ì„œ ì‘ì„±
6) ë¹„í‰ì„œ ë°œí‘œ ë° êµì‚¬ í”¼ë“œë°±: ì˜¨ë¼ì¸ íšŒì˜ ë„êµ¬ ì‚¬ìš©, ë°œí‘œ í›„ êµì‚¬ì™€ ë™ë£Œë¡œë¶€í„° í”¼ë“œë°±""",

    """1) ì§€ì—­ ì‚¬íšŒì˜ í™˜ê²½ ë¬¸ì œ ì¡°ì‚¬: ì§€ì—­ ì‹ ë¬¸ ë° í™˜ê²½ ë‹¨ì²´ ì›¹ì‚¬ì´íŠ¸ ì°¸ì¡°
2) ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì•„ì´ë””ì–´ ë¸Œë ˆì¸ìŠ¤í† ë°: ë””ì§€í„¸ í™”ì´íŠ¸ë³´ë“œ ë„êµ¬ í™œìš©
3) ì œì•ˆëœ ì•„ì´ë””ì–´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í”„ë¡œì íŠ¸ ê³„íš ìˆ˜ë¦½: í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„êµ¬ ì‚¬ìš©
4) íŒ€ë³„ë¡œ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë° ì§„í–‰ ìƒí™© ê³µìœ : í˜‘ì—… ë„êµ¬ ë° ì§„í–‰ ìƒí™© íŠ¸ë˜í‚¹
5) í”„ë¡œì íŠ¸ ê²°ê³¼ë¬¼ ë°œí‘œ ë° í”¼ë“œë°±: í”„ë ˆì  í…Œì´ì…˜ ë„êµ¬ í™œìš©, êµì‚¬ì™€ ë™ë£Œ í”¼ë“œë°±
6) ìµœì¢… ë³´ê³ ì„œ ì‘ì„± ë° êµì‚¬ í‰ê°€: í´ë¼ìš°ë“œ ë¬¸ì„œ ë„êµ¬ë¥¼ í†µí•´ ê°œë³„ ë³´ê³ ì„œ ì‘ì„± ë° êµì‚¬ í”¼ë“œë°±""",

    """1) ì¸ê³µì§€ëŠ¥ì˜ ì—­ì‚¬ì™€ ë°œì „ ê³¼ì • ì¡°ì‚¬: ì˜¨ë¼ì¸ ê°•ì˜ í”Œë«í¼ í™œìš©
2) í˜„ì¬ ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì˜ ì‘ìš© ë¶„ì•¼ íƒêµ¬: ìµœì‹  í•™ìˆ  ë…¼ë¬¸ ë° ê¸°ìˆ  ë¸”ë¡œê·¸ ì°¸ì¡°
3) íŒ€ë³„ë¡œ íŠ¹ì • ì‘ìš© ë¶„ì•¼ì— ëŒ€í•œ ì—°êµ¬ ë°œí‘œ: ë°ì´í„° ì‹œê°í™” ë„êµ¬ ì‚¬ìš©
4) ë°œí‘œ í›„ êµì‚¬ì™€ í•™ìƒë“¤ë¡œë¶€í„° í”¼ë“œë°± ë°›ê¸°: ì‹¤ì‹œê°„ í€´ì¦ˆ ë° í”¼ë“œë°± ë„êµ¬ ì‚¬ìš©
5) ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì˜ ë¯¸ë˜ ì „ë§ì— ëŒ€í•œ í† ë¡ : ë””ì§€í„¸ í† ë¡  ê²Œì‹œíŒ í™œìš©
6) ìµœì¢… ë³´ê³ ì„œ ì‘ì„± ë° ì œì¶œ: í˜‘ì—… ë¬¸ì„œ ë„êµ¬ë¥¼ í†µí•´ ìµœì¢… ë³´ê³ ì„œ ì‘ì„±, ê°œë³„ í”¼ë“œë°± ì œê³µ""",

    """1) ì „ ì„¸ê³„ ë‹¤ì–‘í•œ ìŒì•… ì¥ë¥´ íƒêµ¬: ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ í™œìš©
2) ê° ì¥ë¥´ì˜ íŠ¹ì§•ê³¼ ëŒ€í‘œ ì•„í‹°ìŠ¤íŠ¸ ì¡°ì‚¬: ì˜¨ë¼ì¸ ë°±ê³¼ì‚¬ì „ ë° ìŒì•… ë¸”ë¡œê·¸ ì°¸ì¡°
3) íŒ€ë³„ë¡œ íŠ¹ì • ìŒì•… ì¥ë¥´ì— ëŒ€í•œ ë°œí‘œ ìë£Œ ì¤€ë¹„: í”„ë ˆì  í…Œì´ì…˜ ë„êµ¬ í™œìš©
4) ë°œí‘œ í›„ êµì‚¬ì™€ í•™ìƒë“¤ë¡œë¶€í„° í”¼ë“œë°± ë°›ê¸°: ì‹¤ì‹œê°„ í”¼ë“œë°± ë„êµ¬ ì‚¬ìš©
5) ê° íŒ€ì˜ ë°œí‘œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìŒì•… í† ë¡ : ì˜¨ë¼ì¸ í† ë¡  í”Œë«í¼ í™œìš©
6) ìµœì¢… ë³´ê³ ì„œ ì‘ì„± ë° ì œì¶œ: í´ë¼ìš°ë“œ ë¬¸ì„œ ë„êµ¬ë¥¼ í†µí•´ ìµœì¢… ë³´ê³ ì„œ ì‘ì„±, êµì‚¬ í‰ê°€ ë° í”¼ë“œë°± ì œê³µ"""
]

# ì‚¬ì´ë“œë°”ì— API í‚¤ ì…ë ¥ë€ ì¶”ê°€ ë° ì•ˆë‚´ ë¬¸êµ¬
with st.sidebar:
    user_api_key = st.text_input("API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:", type="password")
    st.write("""
    ğŸ’¡ [API í‚¤ ë°œê¸‰ ë°›ê¸°](https://aistudio.google.com/app/apikey)
    """)

# API í‚¤ ì„¤ì • í•¨ìˆ˜
def configure_api(api_key):
    genai.configure(api_key=api_key)

if user_api_key:
    configure_api(user_api_key)
else:
    st.error("API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")

# ì•± ì œëª©
st.title("ê°œë³„ ë° í˜‘ë ¥í•™ìŠµ ì„¤ê³„ ì‹œ ê³¼ì •ì¤‘ì‹¬í‰ê°€ì™€ ì„±ì°°ê³„íš ìˆ˜ë¦½ì„ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸")

# ìˆ˜ì—…ì•ˆ ëœë¤ ì„ íƒ ë²„íŠ¼
if st.button("ëœë¤ ë½‘ê¸°"):
    selected_lesson = random.choice(sample_lessons)
    st.session_state.selected_lesson = selected_lesson

# ì„ íƒëœ ìˆ˜ì—…ì•ˆ í‘œì‹œ
if "selected_lesson" in st.session_state:
    st.header("í‰ê°€í•  ìˆ˜ì—…ì•ˆ")
    st.write(st.session_state.selected_lesson)

    # ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„±
    st.header("ì²´í¬ë¦¬ìŠ¤íŠ¸")
    checklist_responses = {}

    for category, items in checklist.items():
        st.subheader(category)
        for item in items:
            checklist_responses[item] = st.slider(item, 1, 5)

    # ëª¨ë“  ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª©ì„ ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•  ìˆ˜ ì—†ìŒ
    if all(value > 0 for value in checklist_responses.values()):
        if st.button("ê²°ê³¼ ì €ì¥"):
            results_df = pd.DataFrame.from_dict(checklist_responses, orient='index', columns=['í‰ê°€'])
            st.write("í‰ê°€ ê²°ê³¼:")
            st.dataframe(results_df)
            st.success("í‰ê°€ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")

        if st.button("AI ê²€í† "):
            prompt = (
                f"ìˆ˜ì—…ì•ˆ:\n{st.session_state.selected_lesson}\n\n"
                "ì²´í¬ë¦¬ìŠ¤íŠ¸ í‰ê°€ ê²°ê³¼:\n" +
                "\n".join([f"{item}: {response}" for item, response in checklist_responses.items()]) +
                "\n\ní™•ì •ëœ ìˆ˜ì—…ì•ˆì— ëŒ€í•´ êµì‚¬ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ í‰ê°€í•œ ê²°ê³¼ì…ë‹ˆë‹¤. ê° ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” 1ì ë¶€í„° 5ì ê¹Œì§€ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©°, 1ì ì€ ê°€ì¥ ë‚®ì€ ì ìˆ˜ì…ë‹ˆë‹¤. "
                "êµì‚¬ê°€ ì‹¤ì‹œí•œ í‰ê°€ ê²°ê³¼ë¥¼ ìˆ˜ì—…ì•ˆê³¼ ë¹„êµí•˜ì—¬ ë¹„íŒì ìœ¼ë¡œ ì¸ê³µì§€ëŠ¥ìœ¼ë¡œ ê²€í† í•´ì£¼ì„¸ìš”. êµì‚¬ê°€ ì¤€ ì ìˆ˜ê°€ ì˜³ì§€ ì•Šë‹¤ê³  ì—¬ê¸°ë©´ ì ê²€í•´ ì£¼ê³  ì´ìœ ë¥¼ ê¼­ ì´ì•¼ê¸°í•´ ì£¼ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´ ë‚®ì€ ì ìˆ˜ë¥¼ ì£¼ì—ˆëŠ”ë°, ìˆ˜ì—…ì•ˆì— ë°˜ì˜ë˜ì–´ ìˆëŠ” í•­ëª©ì´ë¼ë©´ ì–´ëŠ ë¶€ë¶„ì„ ì‚´í´ë³¸ í›„ êµì‚¬ê°€ ë¶€ì—¬í•œ ì ìˆ˜ë¥¼ ìˆ˜ì •í•˜ë¼ê³  ë§í•´ì£¼ì„¸ìš”."
            )
            model = genai.GenerativeModel(model_name="gemini-1.5-flash",
                                          generation_config={
                                              "temperature": 0.7,
                                              "max_output_tokens": 3000,
                                          })
            try:
                response = model.generate_content([prompt])
                ai_feedback = response.text
            except Exception as e:
                st.error(f"API í˜¸ì¶œ ì‹¤íŒ¨: {e}")
                ai_feedback = "ìƒì„± ì‹¤íŒ¨"

            st.text_area("AI ê²€í†  í”¼ë“œë°±", ai_feedback, height=300)

        if st.button("ë‹¤ì‹œ ì‹œì‘í•˜ê¸°", key="restart"):
            st.session_state.clear()
            st.experimental_rerun()
    else:
        st.warning("ëª¨ë“  ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª©ì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.")
else:
    st.write("ëœë¤ ë½‘ê¸°ë¥¼ ëˆŒëŸ¬ ìˆ˜ì—…ì•ˆì„ ì„ íƒí•˜ì„¸ìš”.")
